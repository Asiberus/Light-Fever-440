window.Kom=function(){"use strict";var e={179:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=Object.freeze({OK:200,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_ERROR:500}),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._csrfToken=this._getCsrfCookie(),this._headers=this._createRequestHeaders(),this._checkValidity()}var t,o;return t=e,(o=[{key:"_getCsrfCookie",value:function(){if(document.cookie&&""!==document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;++t){var r=e[t].trim().match(/(\w+)=(.*)/);if(void 0!==r&&"csrftoken"===r[1])return decodeURIComponent(r[2])}return""}},{key:"_createRequestHeaders",value:function(){return[["Content-Type","application/json; charset=UTF-8"],["Accept","application/json"],["X-CSRFToken",this._csrfToken]]}},{key:"_checkValidity",value:function(){""!==this._csrfToken?3!==this._headers.length&&console.error("F_KOM_HEADERS_ERROR"):console.error("F_KOM_NO_CSRF_TOKEN")}},{key:"_getErrorCodeFromHTTPStatus",value:function(e){return e===n.NOT_FOUND?"B_KOM_NOT_FOUND":e===n.FORBIDDEN?"B_KOM_ACCESS_FORBIDDEN":e===n.INTERNAL_ERROR?"B_KOM_INTERNAL_ERROR":"B_KOM_UNKNOWN_ERROR_".concat(e)}},{key:"_resolveAs",value:function(e,t){var r=this;return new Promise((function(o,s){t?"raw"===e?t.status===n.OK?o(t.responseText):s(r._getErrorCodeFromHTTPStatus(t.status)):"json"===e||"text"===e?t.ok?o(t[e]()):s(r._getErrorCodeFromHTTPStatus(t.status)):s("F_KOM_UNSUPPORTED_TYPE"):s("F_KOM_MISSING_ARGUMENT")}))}},{key:"_resolveAsJSON",value:function(e){return this._resolveAs("json",e)}},{key:"_resolveAsText",value:function(e){return this._resolveAs("text",e)}},{key:"_resolveAsRaw",value:function(e){return this._resolveAs("raw",e)}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._resolveAsJSON.bind(this);return new Promise((function(n,o){var s={method:"GET",headers:new Headers([t._headers[0]])};fetch(e,s).then(r).then(n).catch(o)}))}},{key:"getText",value:function(e){return this.get(e,this._resolveAsText.bind(this))}},{key:"getRaw",value:function(e){var t=this;return new Promise((function(r,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(e){4===e.target.readyState&&t._resolveAsRaw(e.target).then(r).catch(n)},o.onerror=function(){n("F_KOM_XHR_ERROR")},o.send()}))}},{key:"post",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._resolveAsJSON.bind(this);return new Promise((function(o,s){var i={method:"POST",headers:new Headers(r._headers),body:JSON.stringify(t)};fetch(e,i).then(n).then(o).catch(s)}))}},{key:"postText",value:function(e,t){return this.post(e,t,this._resolveAsText.bind(this))}},{key:"postRaw",value:function(e,t){var r=this;return new Promise((function(n,o){var s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("X-CSRFToken",r._csrfToken),s.overrideMimeType("text/plain; charset=x-user-defined"),s.onreadystatechange=function(e){4===e.target.readyState&&r._resolveAsRaw(e.target).then(n).catch(o)},s.onerror=function(){o("F_KOM_XHR_ERROR")},s.send(JSON.stringify(t))}))}}])&&r(t.prototype,o),e}();t.default=o}},t={};return function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(179)}().default;
